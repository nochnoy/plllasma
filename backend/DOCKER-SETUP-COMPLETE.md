# ‚úÖ Docker Setup –¥–ª—è Plllasma Backend - –ì–û–¢–û–í–û!

## üéâ –ß—Ç–æ –±—ã–ª–æ —Å–æ–∑–¥–∞–Ω–æ

### üì¶ Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- ‚úÖ **Dockerfile** - –º–Ω–æ–≥–æ—ç—Ç–∞–ø–Ω–∞—è —Å–±–æ—Ä–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω
- ‚úÖ **Dockerfile.dev** - –æ–±—Ä–∞–∑ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å hot reload
- ‚úÖ **docker-compose.yml** - –ø—Ä–æ–¥–∞–∫—à–Ω –æ–∫—Ä—É–∂–µ–Ω–∏–µ
- ‚úÖ **docker-compose.dev.yml** - dev –æ–∫—Ä—É–∂–µ–Ω–∏–µ
- ‚úÖ **.dockerignore** - –∏—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è Docker

### üóÑÔ∏è MySQL 8.0.28 –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
- ‚úÖ **MySQL 8.0.28** –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è** –ë–î
- ‚úÖ **–ò–º–ø–æ—Ä—Ç plllasma.sql** –∏–∑ –ø–∞–ø–∫–∏ `../db/`
- ‚úÖ **–¢–µ—Å—Ç–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** (login: test, password: test)
- ‚úÖ **phpMyAdmin** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ë–î

### üõ†Ô∏è –£—Ç–∏–ª–∏—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- ‚úÖ **docker-scripts.ps1** - PowerShell —Å–∫—Ä–∏–ø—Ç—ã (Windows)
- ‚úÖ **docker-scripts.sh** - Bash —Å–∫—Ä–∏–ø—Ç—ã (Linux/Mac)
- ‚úÖ **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏

### üìã –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ **DOCKER.md** - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ **env.docker** - –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ **SQL —Å–∫—Ä–∏–ø—Ç—ã** –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Docker Desktop
```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ Docker Desktop –∑–∞–ø—É—â–µ–Ω
docker --version
docker-compose --version
```

### 2. –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

**Windows:**
```powershell
.\docker-scripts.ps1
```

**Linux/Mac:**
```bash
./docker-scripts.sh
```

### 3. –ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ docker-compose

**–ü—Ä–æ–¥–∞–∫—à–Ω:**
```bash
docker-compose -f docker-compose.yml up -d
```

**Dev (—Å hot reload):**
```bash
docker-compose -f docker-compose.dev.yml up -d
```

## üìä –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã

### –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã:

| –°–µ—Ä–≤–∏—Å | –ü—Ä–æ–¥–∞–∫—à–Ω | Dev | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|----------|-----|----------|
| **Backend API** | http://localhost:3001 | http://localhost:3001 | NestJS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ |
| **phpMyAdmin** | http://localhost:8080 | http://localhost:8081 | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ë–î |
| **MySQL** | localhost:3306 | localhost:3307 | –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö |

## üîë –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
- **Login:** `test`
- **Password:** `test`
- **ID:** 1
- **Nick:** Test User

### API —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
```bash
# –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
curl -X POST http://localhost:3001/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"login":"test","password":"test"}'

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
curl http://localhost:3001/health
```

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è:
1. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** `plllasma`
2. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** `plllasma` —Å –ø–∞—Ä–æ–ª–µ–º `plllasma_password_123`
3. **–í—Å–µ —Ç–∞–±–ª–∏—Ü—ã** –∏–∑ `../db/plllasma.sql`
4. **–¢–µ—Å—Ç–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ MySQL:
```bash
# –ü—Ä–æ–¥–∞–∫—à–Ω
docker exec -it plllasma_mysql mysql -u plllasma -p plllasma

# Dev
docker exec -it plllasma_mysql_dev mysql -u plllasma -p plllasma
```

## üîß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose -f docker-compose.yml down
docker-compose -f docker-compose.dev.yml down

# –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞
docker-compose -f docker-compose.yml build --no-cache

# –õ–æ–≥–∏
docker-compose -f docker-compose.yml logs -f backend

# –û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö (–û–°–¢–û–†–û–ñ–ù–û!)
docker-compose -f docker-compose.yml down -v
```

## üéØ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### ‚úÖ –ü–æ–ª–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å PHP –±—ç–∫–µ–Ω–¥–æ–º
- –ò–¥–µ–Ω—Ç–∏—á–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- –¢–µ –∂–µ API endpoints
- –°–æ–≤–º–µ—Å—Ç–∏–º—ã–µ cookie —Ç–æ–∫–µ–Ω—ã
- –¢–µ –∂–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

### ‚úÖ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å—Ç–µ–∫
- **NestJS** - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π Node.js —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **TypeORM** - ORM –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
- **JWT** - —Ç–æ–∫–µ–Ω—ã –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- **Docker** - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è

### ‚úÖ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–Ω
- –ú–Ω–æ–≥–æ—ç—Ç–∞–ø–Ω–∞—è —Å–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–∞
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä –æ–±—Ä–∞–∑–∞
- –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### ‚úÖ –£–¥–æ–±—Å—Ç–≤–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- Hot reload –≤ dev —Ä–µ–∂–∏–º–µ
- –û—Ç–ª–∞–¥–æ—á–Ω—ã–π –ø–æ—Ä—Ç 9229
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ Docker Desktop**
2. **–í—ã–ø–æ–ª–Ω–∏—Ç–µ** `.\docker-scripts.ps1` (Windows) –∏–ª–∏ `./docker-scripts.sh` (Linux/Mac)
3. **–í—ã–±–µ—Ä–∏—Ç–µ** "–ó–∞–ø—É—Å—Ç–∏—Ç—å dev –æ–∫—Ä—É–∂–µ–Ω–∏–µ" –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
4. **–û—Ç–∫—Ä–æ–π—Ç–µ** http://localhost:3001/health –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
5. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ** –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é —Å –¥–∞–Ω–Ω—ã–º–∏ test/test

## üéâ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

Docker setup –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫–æ–ø–∏—Ä—É–µ—Ç –≤—Å—é –ª–æ–≥–∏–∫—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏–∑ PHP –±—ç–∫–µ–Ω–¥–∞ –∏ –≥–æ—Ç–æ–≤–æ –∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é –Ω–æ–≤—ã–º–∏ –º–æ–¥—É–ª—è–º–∏.
