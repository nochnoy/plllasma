<div class="three-column-page">
  <aside class="aside">
    <app-main-menu></app-main-menu>
  </aside>
  <main class="main">

    <section>

      <header>
        <div>
          <h1 [class.spinner]="isLoading">–ö–∞–Ω–∞–ª—ã</h1>
          <div>–ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è üì¨ –Ω–∞ –ø–æ–Ω—Ä–∞–≤–∏–≤—à–∏–µ—Å—è –≤–∞–º –∫–∞–Ω–∞–ª—ã<br>–∏ –æ–Ω–∏ –ø–æ—è–≤—è—Ç—Å—è —É –≤–∞—Å –≤ –±–æ–∫–æ–≤–æ–º –º–µ–Ω—é.</div>
        </div>
        <div>

        </div>
      </header>

      <div class="info">
        <div class="search" *ngIf="!isLoading">
          <input autofocus [(ngModel)]="searchPhrase" (ngModelChange)="onFilter()" placeholder="–ü–æ–∏—Å–∫">
        </div>
      </div>

      <ng-container *ngIf="!searchPhrase">
        <div class="district">
          <div class="channels">
            <ng-container *ngFor="let channel of channelsAll">
              <ng-container [ngTemplateOutlet]="memberTemplate" [ngTemplateOutletContext]="{channel: channel}"></ng-container>
            </ng-container>
          </div>
        </div>
      </ng-container>

      <ng-container *ngIf="searchPhrase">
        <div class="district">
          <div class="channels" *ngIf="channelsSearching.length">
            <ng-container *ngFor="let channel of channelsSearching">
              <ng-container [ngTemplateOutlet]="memberTemplate" [ngTemplateOutletContext]="{channel: channel}"></ng-container>
            </ng-container>
          </div>
        </div>
        <div *ngIf="!channelsSearching.length">–ù–µ –Ω–∞–π–¥–µ–Ω–æ</div>
      </ng-container>

    </section>

    <section>
      <a routerLink="/channels/new" class="garland">–°–æ–∑–¥–∞—Ç—å –∫–∞–Ω–∞–ª</a>
      <div class="rules">
        <p>–ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã:</p>
        <p>1. –í—Å–µ –º–æ–≥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–≤–æ–∏ –∫–∞–Ω–∞–ª—ã.</p>
        <p>2. –ö–∞–Ω–∞–ª –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –±–æ–∫–æ–≤–æ–µ –º–µ–Ω—é —Ç–æ–ª—å–∫–æ –∫ –≥—Ä–∞–∂–¥–∞–Ω–∞–º, –∫–æ—Ç–æ—Ä—ã–µ —Å–∞–º–∏ –Ω–∞ –Ω–µ–≥–æ –ø–æ–¥–ø–∏—à—É—Ç—Å—è.</p>
        <p>2. –ï—Å–ª–∏ —Å–æ–∑–¥–∞—Ç—å –∫–∞–Ω–∞–ª –æ—Ç –∏–º–µ–Ω–∏ <img src="./assets/ghost.gif"> –ü—Ä–∏–≤–∏–¥–µ–Ω–∏—è —Ç–æ –µ–≥–æ —Å–æ–∑–¥–∞—Ç–µ–ª—å –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–º.</p>
        <p>3. –°–æ–∑–¥–∞—Ç–µ–ª—å —è–≤–ª—è–µ—Ç—Å—è –≤–ª–∞–¥–µ–ª—å—Ü–µ–º –∫–∞–Ω–∞–ª–∞ –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –Ω–∞ –Ω—ë–º —Å–≤–æ–∏ –ø—Ä–∞–≤–∏–ª–∞.</p>
        <p>4. –ö–∞–Ω–∞–ª –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã–º –¥–ª—è –≤—Å–µ—Ö –∏–ª–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –≥—Ä–∞–∂–¥–∞–Ω. –ò–ª–∏ –¥–ª—è –≤—Å–µ—Ö –∫—Ä–æ–º–µ —É–∫–∞–∑–∞–Ω–Ω—ã—Ö.</p>
        <p>5. –•–æ–∑—è–∏–Ω —Ä–µ—à–∞–µ—Ç, –∫—Ç–æ –º–æ–∂–µ—Ç –ø–∏—Å–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è. –ö–∞–Ω–∞–ª –º–æ–∂–µ—Ç –±—ã—Ç—å read-only.</p>
      </div>
    </section>

  </main>
  <div class="sidebar" [class.sidebar-halloween]="isHalloween">

    <div class="halloween" *ngIf="isHalloween">
      <ng-container *ngIf="currentYear === 2023">
        –ö–æ–Ω–µ—Ü –±–ª–∏–∑–æ–∫! –ö–∞–Ω–∞–ª—ã –º—É—Ç–∏—Ä—É—é—Ç.
        –°–∫–æ—Ä–æ –æ–Ω–∏ –Ω–∞—á–Ω—É—Ç —Ä–∞–∑–º–Ω–æ–∂–∞—Ç—å—Å—è
        –∏ –∏—Ö —Å—Ç–∞–Ω–µ—Ç —Å—Ç–æ–ª—å–∫–æ, —á—Ç–æ –º—ã –≤—Å–µ —É–º—Ä—ë–º!
        –ò&nbsp;—á–µ—Ä–≤–∏ —Å—ä–µ–¥—è—Ç –Ω–∞—à–∏ –≥–ª–∞–∑–∞!<br>
      </ng-container>
      <img src="assets/img/halloween-pumpkin.png">
    </div>

  </div>
</div>

<ng-template #memberTemplate let-channel='channel'>
  <a *ngIf="!(channel.role && channel.role !== 9)"
     class="channel noaccess"
     (click)="onChannelClick(channel)"
     [routerLink]="'/channel/' + channel.id_place">
       <i *ngIf="channel.id_place <= 47">üîë</i>
       {{channel.shortName}}
  </a>
    <a *ngIf="(channel.role && channel.role !== 9)"
       class="channel"
       (click)="onChannelClick(channel)"
       [class.star]="channel.time_viewed < channel.time_changed"
       [routerLink]="'/channel/' + channel.id_place">
         <i *ngIf="channel.id_place <= 47">üìú</i>
         <i *ngIf="channel.id_place > 47">üéÉ</i>
         {{channel.shortName}}
    </a>
</ng-template>
