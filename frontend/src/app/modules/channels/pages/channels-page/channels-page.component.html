<div class="three-column-page">
  <aside class="aside">
    <app-main-menu></app-main-menu>
  </aside>
  <main class="main">
    <header>
      <div>
        <h1 [class.spinner]="isLoading">üöß –í—Å–µ –∫–∞–Ω–∞–ª—ã</h1>
        <div>–°—Ç—Ä–∞–Ω–∏—Ü–∞ –µ—â—ë —Å—Ç—Ä–æ–∏—Ç—Å—è </div>
      </div>
      <div>
        <div class="search" *ngIf="!isLoading">
          <input autofocus [(ngModel)]="searchPhrase" (ngModelChange)="onFilter()" placeholder="–ü–æ–∏—Å–∫">
        </div>
      </div>
    </header>

    <ng-container *ngIf="!isLoading">

      <div class="info">
        üì¨ –ü–æ–¥–ø–∏—Å—ã–≤–∞—è—Å—å –Ω–∞ –∫–∞–Ω–∞–ª—ã –≤—ã –¥–æ–±–∞–≤–ª—è–µ—Ç–µ –∏—Ö —Å–µ–±–µ –Ω–∞ –±–æ–∫–æ–≤–æ–µ –º–µ–Ω—é. –ê –æ—Ç–ø–∏—Å—ã–≤–∞—è—Å—å - —É–¥–∞–ª—è–µ—Ç–µ.
      </div>

      <ng-container *ngIf="!searchPhrase">
        <div class="section">
          <div class="channels">
            <ng-container *ngFor="let channel of channelsAll">
              <ng-container [ngTemplateOutlet]="memberTemplate" [ngTemplateOutletContext]="{channel: channel}"></ng-container>
            </ng-container>
          </div>
        </div>
      </ng-container>

      <ng-container *ngIf="searchPhrase">
        <div class="section">
          <label>–ü–æ–∏—Å–∫ –∫–∞–Ω–∞–ª–∞ "{{searchPhrase}}"</label>
          <a class="search-clear" href (click)="onSearchClearClick($event)">–æ—Ç–º–µ–Ω–∏—Ç—å</a>
          <div class="channels" *ngIf="channelsSearching.length">
            <ng-container *ngFor="let channel of channelsSearching">
              <ng-container [ngTemplateOutlet]="memberTemplate" [ngTemplateOutletContext]="{channel: channel}"></ng-container>
            </ng-container>
          </div>
        </div>
        <div *ngIf="!channelsSearching.length">–ù–µ –Ω–∞–π–¥–µ–Ω–æ</div>
      </ng-container>

    </ng-container>

  </main>
  <div class="sidebar"></div>
</div>

<ng-template #memberTemplate let-channel='channel'>
  <a
    class="name"
    [routerLink]="'/channel/' + channel.id_place">
      <i *ngIf="channel.id_place > 47">üéÉ</i>
      {{channel.name}}
      <i *ngIf="!channel.role || channel.role === 9">‚úã</i>
    </a>
</ng-template>
