<div class="three-column-page">
  <aside class="aside">
    <app-main-menu></app-main-menu>
  </aside>
  <main class="main">

    <section>

      <header>
        <div>
          <h1 [class.spinner]="isLoading">–ö–∞–Ω–∞–ª—ã</h1>
        </div>
        <div class="search" *ngIf="!isLoading">
          <input autofocus [(ngModel)]="searchPhrase" (ngModelChange)="onFilter()" placeholder="–ü–æ–∏—Å–∫">
        </div>
        <div></div>
      </header>

      <ng-container *ngIf="!searchPhrase">
        <div class="district">
          <div class="channels">
            <ng-container *ngFor="let channel of channelsAll">
              <ng-container [ngTemplateOutlet]="memberTemplate" [ngTemplateOutletContext]="{channel: channel}"></ng-container>
            </ng-container>
          </div>
        </div>
      </ng-container>

      <ng-container *ngIf="searchPhrase">
        <div class="district">
          <div class="channels" *ngIf="channelsSearching.length">
            <ng-container *ngFor="let channel of channelsSearching">
              <ng-container [ngTemplateOutlet]="memberTemplate" [ngTemplateOutletContext]="{channel: channel}"></ng-container>
            </ng-container>
          </div>
        </div>
        <div *ngIf="!channelsSearching.length">–ù–µ –Ω–∞–π–¥–µ–Ω–æ</div>
      </ng-container>

    </section>

    <section>
      <a routerLink="/channels/new" class="garland">–°–æ–∑–¥–∞—Ç—å –∫–∞–Ω–∞–ª</a>
      <div class="rules">
        <p>–ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã:</p>
        <p>1. –í—Å–µ –º–æ–≥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–≤–æ–∏ –∫–∞–Ω–∞–ª—ã.</p>
        <p>2. –ö–∞–Ω–∞–ª –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –±–æ–∫–æ–≤–æ–µ –º–µ–Ω—é —Ç–æ–ª—å–∫–æ –∫ —Ç–µ–º –ª—é–¥—è–º, –∫—Ç–æ —Å–∞–º –Ω–∞ –Ω–µ–≥–æ –ø–æ–¥–ø–∏—à–µ—Ç—Å—è.</p>
        <p>3. –ï—Å–ª–∏ —Å–æ–∑–¥–∞—Ç—å –∫–∞–Ω–∞–ª –æ—Ç –∏–º–µ–Ω–∏ <img src="./assets/ghost.gif"> –ü—Ä–∏–≤–∏–¥–µ–Ω–∏—è —Ç–æ –µ–≥–æ —Å–æ–∑–¥–∞—Ç–µ–ª—å –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–º.</p>
        <p>4. –°–æ–∑–¥–∞—Ç–µ–ª—å —è–≤–ª—è–µ—Ç—Å—è –≤–ª–∞–¥–µ–ª—å—Ü–µ–º –∫–∞–Ω–∞–ª–∞ –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –Ω–∞ –Ω—ë–º —Å–≤–æ–∏ –ø—Ä–∞–≤–∏–ª–∞.</p>
        <p>5. –ö–∞–Ω–∞–ª –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã–º –¥–ª—è –≤—Å–µ—Ö –∏–ª–∏ (–µ—â—ë –Ω–µ –¥–æ–¥–µ–ª–∞–Ω–æ) —Ç–æ–ª—å–∫–æ –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –≥—Ä–∞–∂–¥–∞–Ω</p>
      </div>
    </section>

  </main>
  <div class="sidebar" [class.sidebar-halloween]="isHalloween">

    <div class="halloween" *ngIf="isHalloween">
      <ng-container *ngIf="currentYear === 2023">
        –ö–æ–Ω–µ—Ü –±–ª–∏–∑–æ–∫! –ö–∞–Ω–∞–ª—ã –º—É—Ç–∏—Ä—É—é—Ç.
        –°–∫–æ—Ä–æ –æ–Ω–∏ –Ω–∞—á–Ω—É—Ç —Ä–∞–∑–º–Ω–æ–∂–∞—Ç—å—Å—è
        –∏ –∏—Ö —Å—Ç–∞–Ω–µ—Ç —Å—Ç–æ–ª—å–∫–æ, —á—Ç–æ –º—ã –≤—Å–µ —É–º—Ä—ë–º!
        –ò&nbsp;—á–µ—Ä–≤–∏ —Å—ä–µ–¥—è—Ç –Ω–∞—à–∏ –≥–ª–∞–∑–∞!<br>
      </ng-container>
      <img src="assets/img/halloween-pumpkin.png">
    </div>

  </div>
</div>

<ng-template #memberTemplate let-channel='channel'>
  <a *ngIf="!(channel.role && channel.role !== 9)"
     class="channel noaccess"
     (click)="onChannelClick(channel)"
     [routerLink]="'/channel/' + channel.id_place">
       <i *ngIf="channel.id_place <= 47">üîë</i>
       {{channel.shortName}}
  </a>
  <a *ngIf="(channel.role && channel.role !== 9)"
     class="channel"
     (click)="onChannelClick(channel)"
     [class.star]="channel.ignoring !== 1 && (!channel.time_viewed || channel.time_viewed < channel.time_changed)"
     [routerLink]="'/channel/' + channel.id_place">
       <i *ngIf="channel.id_place <= 47">üìú</i>
       <i *ngIf="channel.id_place > 47">üéÉ</i>
       {{channel.shortName}}
  </a>
</ng-template>
