<div class="three-column-page">
  <aside class="aside">
      <app-main-menu></app-main-menu>
  </aside>
  <main class="main">
    <ng-container *ngIf="channel">
      <header>
        <h1 [class.spinner]="channel.spinner">{{channel.name}}</h1>
        <p>{{channel.description}}</p>
      </header>

      <div class="form">
        <app-message-form class="form-content" [channelId]="channel.id_place" (onPost)="onNewMessageCreated()"></app-message-form>
      </div>

      <div *ngIf="!!channelModel" class="messages">
        <div class="thread" [class.thread-gray]="t.isGray" *ngFor="let t of channelModel.threads">
          <app-messages [placeId]="channel.id_place" [messages]="[t.root]" [showChildren]="t.isGray || t.isExpanded"></app-messages>
          <div class="branch" *ngIf="t.commentsCount > 0 && !(t.isGray || t.isExpanded)" (click)="onExpandClick($event, t)">
            <a class="expand" [class.spinner]="isExpanding === t" href >{{t.commentsCountText}}</a>
          </div>
        </div>
      </div>

    </ng-container>
  </main>
  <div class="sidebar">

    <div class="nowandhere" *ngIf="hereAndNowUsers.length">
      <div class="nowandhere-label">Здесь сейчас:</div>
      <div *ngFor="let user of hereAndNowUsers; let i = index;" class="nowandhere-user">{{user}}</div>
    </div>

  </div>
</div>
