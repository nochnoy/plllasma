<div class="matrix"
     [class.editmode]="isEditMode">
  <ng-container *ngIf="matrix">

    <!-- Объекты -->
    <ng-container *ngFor="let item of matrix?.objects; let z = index;">
      <div *ngIf="item !== transform?.object"
           class="item"
           [style.left]="item.domRect?.left + 'px'"
           [style.top]="item.domRect?.top + 'px'"
           [style.width]="item.domRect?.width + 'px'"
           [style.height]="item.domRect?.height + 'px'"
           [attr.id]="item.id">
        <div class="content" [style.background-color]="item.color">{{item.id}}</div>
      </div>
    </ng-container>

    <!-- Таскаемая копия объекта -->
    <div *ngIf="transform"
         class="item dragging"
         [style.left]="(matrixRect.left + transform.resultDomRect.left) + 'px'"
         [style.top]="(matrixRect.top + transform.resultDomRect.top) + 'px'"
         [style.width]="transform.resultDomRect.width + 'px'"
         [style.height]="transform.resultDomRect.height + 'px'">
      <div class="content" [style.background-color]="transform.object.color">{{transform.object.x}}:{{transform.object.y}}</div>
    </div>

    <!-- Тень под таскаемой копией объекта -->
    <div *ngIf="transform && shadowRect"
         class="item dragging dragging-placeholder"
         [style.left]="shadowRect.left + 'px'"
         [style.top]="shadowRect.top + 'px'"
         [style.width]="shadowRect.width + 'px'"
         [style.height]="shadowRect.height + 'px'">
      <div class="content"></div>
    </div>

    <app-selection
      *ngIf="selectionRect"
      (dragStart)="startResize()"
      (dragEnd)="endResize()"
      [(rect)]="selectionRect">
    </app-selection>

  </ng-container>
</div>
