<div class="matrix"
     [class.editmode]="isEditMode"
     [style.grid-auto-rows]="cellSize + 'px'">
  <ng-container *ngIf="matrix">

    <!-- Объекты -->
    <ng-container *ngFor="let item of matrix?.objects; let z = index;">
      <div *ngIf="item !== transform?.object"
           class="item"
           [attr.id]="item.id"
           [class.selected]="item.selected"
           [style.grid-column]="(item.x + 1) + '/' + (item.x + 1 + item.w)"
           [style.grid-row]="(item.y + 1) + '/' + (item.y + 1 + item.h)">
        <div class="content" [style.background-color]="item.color">{{item.x}}:{{item.y}}</div>
      </div>
    </ng-container>

    <!-- Таскаемая копия объекта -->
    <div *ngIf="transform"
         class="item dragging"
         [style.left]="(matrixRect.left + transform.resultPixelRect.left) + 'px'"
         [style.top]="(matrixRect.top + transform.resultPixelRect.top) + 'px'"
         [style.width]="transform.resultPixelRect.width + 'px'"
         [style.height]="transform.resultPixelRect.height + 'px'">
      <div class="content" [style.background-color]="transform.object.color">{{transform.object.x}}:{{transform.object.y}}</div>
    </div>

    <!-- Тень под таскаемой копией объекта -->
    <div *ngIf="transform && shadowRect"
         class="item dragging dragging-placeholder"
         [style.left]="shadowRect.left + 'px'"
         [style.top]="shadowRect.top + 'px'"
         [style.width]="shadowRect.width + 'px'"
         [style.height]="shadowRect.height + 'px'">
      <div class="content"></div>
    </div>

    <app-selection
      *ngIf="selectionRect"
      (dragStart)="startResize()"
      (dragEnd)="endResize()"
      [(rect)]="selectionRect">
    </app-selection>

  </ng-container>
</div>
